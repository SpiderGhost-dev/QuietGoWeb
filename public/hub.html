<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QuietGo Hub - Sync & Manage Your Data</title>
    <meta name="description" content="Sync, organize, store, view, and send your digestive health data with QuietGo Hub.">
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Playfair+Display:wght@400;600;700&display=swap" rel="stylesheet">
    
    <!-- Styles -->
    <link rel="stylesheet" href="css/styles.css">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="assets/logo-graphic_1757613896603.png">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="container">
            <div class="nav-content">
                <div class="nav-brand">
                    <img src="assets/logo-graphic_1757613896603.png" alt="QuietGo Logo">
                    <div>
                        <span class="quietgo-brand">
                            <span class="quiet">Quiet</span><span class="go">Go</span>
                        </span>
                        <span class="muted" style="margin-left: 8px; font-size: 0.875rem;">Hub</span>
                    </div>
                </div>
                
                <div class="nav-links">
                    <a href="index.html" class="nav-link">Home</a>
                    <span id="userEmail" class="muted"></span>
                    <button class="btn btn-outline" onclick="handleSignOut()">Sign Out</button>
                </div>
                
                <button class="mobile-menu-btn" onclick="toggleMobileMenu()">
                    <svg class="icon" viewBox="0 0 24 24">
                        <path d="M3 12h18M3 6h18M3 18h18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                </button>
            </div>

            <!-- Mobile Menu -->
            <div class="mobile-menu" id="mobileMenu">
                <a href="index.html" class="nav-link">Home</a>
                <span id="userEmailMobile" class="muted"></span>
                <button class="btn btn-outline" onclick="handleSignOut()" style="margin-top: 16px;">Sign Out</button>
            </div>
        </div>
    </nav>

    <!-- Loading State -->
    <div id="loadingState" class="section text-center">
        <div class="container">
            <div style="padding: 64px 0;">
                <div style="font-size: 1.125rem;">Loading your data...</div>
            </div>
        </div>
    </div>

    <!-- Main Hub Content -->
    <div id="hubContent" style="display: none;">
        <!-- Hero Section -->
        <section class="section-hero">
            <div class="container text-center">
                <h1 class="hero-title" style="font-size: 2.5rem;">
                    Welcome to 
                    <span class="quietgo-brand">
                        <span class="quiet">Quiet</span><span class="go">Go</span>
                    </span> Hub
                </h1>
                <p class="hero-subtitle" style="font-size: 1.125rem;">
                    Sync, organize, and manage your digestive health data
                </p>
            </div>
        </section>

        <!-- Data Management Section -->
        <section class="section">
            <div class="container">
                <!-- Quick Actions -->
                <div class="grid grid-3" style="margin-bottom: 48px;">
                    <div class="card text-center">
                        <div class="card-icon">
                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" style="color: var(--green-color);">
                                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                                <polyline points="17,8 12,3 7,8"/>
                                <line x1="12" y1="3" x2="12" y2="15"/>
                            </svg>
                        </div>
                        <h3>Upload Data</h3>
                        <p class="muted">Sync new data from your mobile app</p>
                        <button class="btn btn-primary" onclick="openUploadModal()">Upload Files</button>
                    </div>

                    <div class="card text-center">
                        <div class="card-icon accent">
                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" style="color: var(--accent-color);">
                                <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
                            </svg>
                        </div>
                        <h3>Generate Report</h3>
                        <p class="muted">Create PDF reports for healthcare providers</p>
                        <button class="btn btn-accent" onclick="generateReport()">Create Report</button>
                    </div>

                    <div class="card text-center">
                        <div class="card-icon">
                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" style="color: var(--green-color);">
                                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                                <polyline points="7,10 12,15 17,10"/>
                                <line x1="12" y1="15" x2="12" y2="3"/>
                            </svg>
                        </div>
                        <h3>Export Data</h3>
                        <p class="muted">Download your data in various formats</p>
                        <button class="btn btn-primary" onclick="exportData()">Export CSV</button>
                    </div>
                </div>

                <!-- Data Overview -->
                <div class="card" style="margin-bottom: 32px;">
                    <div class="flex flex-between" style="margin-bottom: 24px;">
                        <h2>Your Data Overview</h2>
                        <button class="btn btn-outline" onclick="refreshData()">Refresh</button>
                    </div>
                    
                    <div class="grid grid-3">
                        <div class="text-center">
                            <div style="font-size: 2rem; font-weight: bold; color: var(--green-color); margin-bottom: 8px;" id="totalEntries">--</div>
                            <div class="subheading">Total Entries</div>
                        </div>
                        <div class="text-center">
                            <div style="font-size: 2rem; font-weight: bold; color: var(--accent-color); margin-bottom: 8px;" id="lastSync">--</div>
                            <div class="subheading">Last Sync</div>
                        </div>
                        <div class="text-center">
                            <div style="font-size: 2rem; font-weight: bold; color: var(--heading-color); margin-bottom: 8px;" id="dataSize">--</div>
                            <div class="subheading">Data Size</div>
                        </div>
                    </div>
                </div>

                <!-- Recent Files -->
                <div class="card">
                    <h3 style="margin-bottom: 24px;">Recent Files</h3>
                    <div id="filesList">
                        <div class="text-center muted" style="padding: 32px;">
                            No files uploaded yet. Use the upload button above to sync your first data.
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- Upload Modal -->
    <div id="uploadModal" class="modal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeUploadModal()">&times;</button>
            <div class="modal-header">
                <h2 class="modal-title">Upload Data Files</h2>
                <p class="muted">Upload CSV files exported from your QuietGo mobile app</p>
            </div>
            
            <form id="uploadForm" enctype="multipart/form-data">
                <div style="margin-bottom: 24px;">
                    <label style="font-weight: 500; margin-bottom: 8px; display: block;">Select Files</label>
                    <input type="file" id="fileInput" name="files" multiple accept=".csv,.json" 
                           style="width: 100%; padding: 12px; border: 2px dashed var(--border-color); border-radius: var(--border-radius); background-color: var(--bg-color); color: var(--text-color);">
                    <div style="font-size: 0.875rem; opacity: 0.7; margin-top: 8px;">
                        Supported formats: CSV, JSON (Max 10MB per file)
                    </div>
                </div>
                
                <div id="uploadProgress" style="display: none; margin-bottom: 24px;">
                    <div style="background-color: var(--border-color); border-radius: 4px; overflow: hidden;">
                        <div id="progressBar" style="height: 8px; background-color: var(--green-color); width: 0%; transition: width 0.3s;"></div>
                    </div>
                    <div style="font-size: 0.875rem; margin-top: 8px; opacity: 0.8;" id="uploadStatus">Preparing upload...</div>
                </div>
                
                <div class="flex gap-md">
                    <button type="button" class="btn btn-outline" onclick="closeUploadModal()" style="flex: 1;">Cancel</button>
                    <button type="submit" class="btn btn-primary" id="uploadBtn" style="flex: 1;">Upload Files</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer" style="margin-top: 64px;">
        <div class="container">
            <div class="footer-bottom">
                <p>© 2024 QuietGo. All rights reserved.</p>
                <div class="footer-meta">
                    <span>Secure • Private • HIPAA-aware</span>
                </div>
            </div>
        </div>
    </footer>

    <script src="js/site.js"></script>
    <script src="js/hub.js"></script>
</body>
</html>